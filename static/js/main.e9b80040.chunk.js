(this["webpackJsonpprison-web"]=this["webpackJsonpprison-web"]||[]).push([[0],{2:function(e){e.exports=JSON.parse('{"SERVER_URL":"https://wiezienie2021.azurewebsites.net/"}')},20:function(e,t,n){},24:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(25),i=n.n(o),c=(n(31),n(3)),r=n(4),l=n(6),h=n(5),u=n(11),d=n(9),j=(n(32),n(8)),p=(n(33),n(2)),b=function(e){fetch(p.SERVER_URL+"api/Authentication/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.data)}).then((function(e){return e.json()})).then((function(t){if(console.log(t),null!=t.token){var n=JSON.stringify(t);localStorage.setItem("roles",t.roles),localStorage.setItem("token",t.token),e.setUser(n,t.roles)}})).catch((function(e){console.error("Error:",e)}))},m=n(0),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={userName:"",password:""},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,t.target.value))},e.handleButton=function(){var t={data:e.state,setUser:e.props.setUser};b(t)},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:this.props.user&&!0!==this.state.authorized?Object(m.jsx)(d.a,{to:"/"}):Object(m.jsxs)("div",{className:"loginBox",children:[Object(m.jsx)("h1",{className:"loginH1",children:"Logowanie"}),Object(m.jsx)("input",{type:"text",name:"userName",placeholder:"login",value:this.state.userName,onChange:this.handleChange}),Object(m.jsx)("input",{type:"password",placeholder:"has\u0142o",name:"password",className:"password",value:this.state.password,onChange:this.handleChange}),Object(m.jsx)("button",{className:"loginButton",onClick:this.handleButton,children:"Zaloguj"})]})})}}]),n}(a.Component),f=(n(40),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"start",children:null!=this.props.user?Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Witaj na stronie zak\u0142adu karnego"})}):Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Zaloguj si\u0119!"})})})}}]),n}(a.Component)),g=function(e){return e.clearUser(),localStorage.clear("user"),Object(m.jsx)(d.a,{to:"/login"})},x=(n(20),function(e){return fetch(p.SERVER_URL+"api/CellType",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e(t),console.log("Cele ze state: "+t)})).catch((function(e){console.error("Error:",e)}))}),v=function(e){fetch(p.SERVER_URL+"api/PCells",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.data)}).then((function(e){return e.json()})).then((function(t){200===t.statusCode&&(alert("Dodano cele"),e.resetState())})).catch((function(e){console.error("Error:",e)}))},C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={bedsCount:1,idCellType:1,cellNumber:1,cellTypes:[]},e.resetState=function(){e.setState({bedsCount:1,idCellType:1,cellNumber:1})},e.handleButton=function(){var t={data:e.state,resetState:e.resetState};v(t)},e.setCellTypes=function(t){e.setState({cellTypes:t})},e.componentDidMount=function(){x(e.setCellTypes)},e.displayCellsType=function(){return Object(m.jsxs)("select",{name:"cellName",onChange:e.handleCellsType,children:[e.state.cellTypes.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.cellName},e.id)})),";"]})},e.handleCellsType=function(t){e.setState({idCellType:1*t.target.value})},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,1*t.target.value))},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"registerBox",children:[Object(m.jsx)("h1",{className:"registerH1",children:"Tworzenie cel"}),Object(m.jsx)("label",{htmlFor:"bedsCount",children:"Ilo\u015b\u0107 \u0142\xf3\u017cek (1-10):"}),Object(m.jsx)("input",{id:"bedsCount",type:"number",name:"bedsCount",min:"1",max:"10",value:this.state.bedsCount,onChange:this.handleChange}),Object(m.jsx)("label",{htmlFor:"cellNumber",children:"Numer celi:"}),Object(m.jsx)("input",{id:"cellNumber",type:"text",name:"cellNumber",value:this.state.cellNumber,onChange:this.handleChange}),Object(m.jsx)("h3",{children:"Wybierz typ celi:"}),this.displayCellsType(),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Utw\xf3rz cele"})]})}}]),n}(a.Component),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={bedsCount:1,idCellType:1,cellNumber:1},e.componentDidMount=function(){fetch(p.SERVER_URL+"api/PCells/"+e.props.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setState({bedsCount:t.bedsCount,idCellType:t.idCellType,cellNumber:t.cellNumber})})).catch((function(e){console.error("Error:",e)}))},e.handleButton=function(){var t=e.state;console.log(t),fetch(p.SERVER_URL+"api/PCells/"+e.props.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log("Success:",t),200===t.statusCode&&(alert("Edytowano cele"),e.props.refreshList(),e.props.closePopup())})).catch((function(e){console.error("Error:",e)}))},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,1*t.target.value))},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"popup",children:Object(m.jsxs)("div",{className:"popup_inner",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"bedsCount",children:"Ilo\u015b\u0107 \u0142\xf3\u017cek (1-10):"}),Object(m.jsx)("input",{id:"bedsCount",type:"number",name:"bedsCount",min:"1",max:"10",value:this.state.bedsCount,onChange:this.handleChange})]}),Object(m.jsx)("label",{htmlFor:"cellNumber",children:"Numer celi:"}),Object(m.jsx)("input",{id:"cellNumber",type:"text",name:"cellNumber",value:this.state.cellNumber,onChange:this.handleChange}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Edytuj cele"}),Object(m.jsx)("button",{onClick:this.props.closePopup,children:"Zamknij"})]})})}}]),n}(a.Component),S=function(e){fetch(p.SERVER_URL+"api/PCells",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){console.error("Error:",e)}))},k=n(17),N=function(e){fetch(p.SERVER_URL+"api/PCells/"+e.cellId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){t.json();var n=Object(k.a)(e.state),a=n.findIndex((function(t){return t.id===e.cellId}));n.splice(a,1),e.setCells(n)})).then((function(e){return console.log(e)}))},P=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={cells:[],showPopup:!1,cellId:null},e.togglePopup=function(t){e.setState({showPopup:!e.state.showPopup,cellId:t})},e.setCells=function(t){e.setState({cells:t})},e.componentDidMount=function(){S(e.setCells)},e.deleteCell=function(t){var n={state:e.state.cells,setCells:e.setCells,cellId:t};N(n)},e.handleCells=function(){return Object(m.jsx)("div",{className:"cellBox",children:Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:"headerTable",children:[Object(m.jsx)("td",{children:"Numer:"}),Object(m.jsx)("td",{children:"Ilo\u015b\u0107 miejsc:"}),Object(m.jsx)("td",{children:"Ilo\u015b\u0107 zaj\u0119tych miejsc:"}),Object(m.jsx)("td",{children:"Typ celi:"}),"Admin"===e.props.role?Object(m.jsx)("td",{children:"Akcja:"}):null]}),e.state.cells.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.cellNumber}),Object(m.jsx)("td",{children:t.bedsCount}),Object(m.jsx)("td",{children:t.occupiedBeds}),Object(m.jsx)("td",{children:t.cellType.cellName}),"Admin"===e.props.role?Object(m.jsxs)("td",{children:[Object(m.jsx)("button",{className:"deleteButton",id:t.id,onClick:function(){e.deleteCell(t.id)},children:"Usu\u0144"}),Object(m.jsx)("button",{onClick:function(){e.togglePopup(t.id)},children:"Edytuj"}),e.state.showPopup?Object(m.jsx)(y,{id:e.state.cellId,closePopup:e.togglePopup,refreshList:function(){return S(e.setCells)}}):null]}):null]},t.id)}))]})})})},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"cell-main",children:[Object(m.jsx)("h1",{children:"Lista cel:"}),this.handleCells(),"Admin"===this.props.role?Object(m.jsx)("div",{children:Object(m.jsx)(u.b,{to:"/addCell",children:Object(m.jsx)("button",{className:"add",children:"Dodaj cele"})})}):null]})}}]),n}(a.Component),D=function(e){return fetch(p.SERVER_URL+"api/Logger",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e(t)}))},R=(n(41),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={logs:[],firstLog:0,lastLog:20},e.componentDidMount=function(){D(e.setLogs)},e.setLogs=function(t){e.setState({logs:t})},e.handleNextButton=function(){e.setState((function(e){return{firstLog:e.firstLog+20,lastLog:e.lastLog+20}}))},e.handlePrevButton=function(){e.setState((function(e){return{firstLog:e.firstLog-20,lastLog:e.lastLog-20}}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.logs,n=e.firstLog,a=e.lastLog;return Object(m.jsxs)("div",{className:"prisoner-main",children:[Object(m.jsx)("div",{className:"prisonerBox",children:Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:"headerTable",children:[Object(m.jsx)("td",{children:"Miejsce:"}),Object(m.jsx)("td",{children:"Rodzaj akcji:"}),Object(m.jsx)("td",{children:"Czas:"})]},"header"),t.reverse().slice(n,a).map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.controller}),Object(m.jsx)("td",{children:e.action}),Object(m.jsx)("td",{children:new Date(e.logData).toLocaleDateString()})]},e.id)}))]})})}),Object(m.jsxs)("div",{className:"log-buttons",children:[0===n?null:Object(m.jsx)("button",{className:"add",onClick:this.handlePrevButton,children:"Poprzednie"}),t.length>a?Object(m.jsx)("button",{className:"add",onClick:this.handleNextButton,children:"Nast\u0119pne"}):null]})]})}}]),n}(a.Component)),w=function(e){fetch(p.SERVER_URL+"api/RegisterMail/send",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.statusCode&&alert("Dodano cele")})).catch((function(e){console.error("Error:",e)}))},E=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={toEmail:""},e.handleChange=function(t){e.setState({toEmail:t.target.value})},e.handleButton=function(){w(e.state)},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"registerBox",children:[Object(m.jsx)("h1",{className:"registerH1",children:"Zapro\u015b pracownika"}),Object(m.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:this.state.toEmail,onChange:this.handleChange}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Zapro\u015b"})]})})}}]),n}(a.Component),z=(n(42),function(e){fetch(p.SERVER_URL+"api/Authentication/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),400!==e.status&&alert("Zarejestrowano")})).catch((function(e){console.error("Error:",e)}))}),A=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={userName:"",email:"",password:"",name:"",forname:"",inviteCode:""},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,t.target.value))},e.handleButton=function(){z(e.state)},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"registerBox",children:[Object(m.jsx)("h1",{className:"registerH1",children:"Rejestracja u\u017cytkownika"}),Object(m.jsx)("input",{type:"text",name:"userName",placeholder:"login",value:this.state.userName,onChange:this.handleChange}),Object(m.jsx)("input",{type:"password",placeholder:"has\u0142o",name:"password",className:"password",value:this.state.password,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"imie",name:"name",className:"name",value:this.state.name,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"nazwisko",name:"forname",className:"forname",value:this.state.forname,onChange:this.handleChange}),Object(m.jsx)("input",{type:"email",placeholder:"mail",name:"email",className:"mail",value:this.state.email,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"kod",name:"inviteCode",className:"code",value:this.state.inviteCode,onChange:this.handleChange}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Zarejestruj"})]})}}]),n}(a.Component),B=(n(43),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={userName:"",email:"",password:"",name:"",forname:"",prisonName:""},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,t.target.value))},e.handleButton=function(){z(e.state)},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"registerBox",children:[Object(m.jsx)("h1",{className:"registerH1",children:"Rejestracja Wi\u0119zienia"}),Object(m.jsx)("input",{type:"text",name:"userName",placeholder:"login",value:this.state.userName,onChange:this.handleChange}),Object(m.jsx)("input",{type:"password",placeholder:"has\u0142o",name:"password",className:"password",value:this.state.password,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"imie",name:"name",className:"name",value:this.state.name,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"nazwisko",name:"forname",className:"forname",value:this.state.forname,onChange:this.handleChange}),Object(m.jsx)("input",{type:"email",placeholder:"mail",name:"email",className:"mail",value:this.state.email,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"Nazwa wi\u0119zienia",name:"prisonName",className:"prisonName",value:this.state.inviteCode,onChange:this.handleChange}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Zarejestruj"})]})}}]),n}(a.Component)),T=(n(44),n(45),function(e){return Object(m.jsx)("nav",{className:"navbar navbar-expand-md navbar-dark fixed-top bg-dark",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)("h1",{className:"navbar-brand",children:"Prison"}),Object(m.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarCollapse",children:[null!=e.user?Object(m.jsx)("div",{children:Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-md-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("div",{className:"nav-link",children:Object(m.jsx)(u.c,{to:"/",children:"Start"})})})," ",Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("div",{className:"nav-link",children:Object(m.jsx)(u.c,{to:"/prisoners",children:"Lista wi\u0119\u017ani\xf3w"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("div",{className:"nav-link",children:Object(m.jsx)(u.c,{to:"/cell",children:"Lista Cel"})})}),"Admin"===e.roles?Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("div",{className:"nav-link",children:Object(m.jsx)(u.c,{to:"/inviteEmployee",children:"Zapro\u015b"})})}):null,"Admin"===e.roles?Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("div",{className:"nav-link",children:Object(m.jsx)(u.c,{to:"/logs",children:"Logi"})})}):null]})}):null,e.user?Object(m.jsx)("div",{className:"auth-section-logout",children:Object(m.jsx)(u.b,{to:"/logout",children:Object(m.jsx)("button",{className:"btn btn-outline-danger",children:"Wyloguj"})})}):Object(m.jsxs)("div",{className:"auth-section",children:[Object(m.jsx)(u.b,{to:"/login",children:Object(m.jsx)("button",{className:"btn btn-outline-success login",children:"Logowanie"})}),Object(m.jsx)(u.b,{to:"/register",children:Object(m.jsx)("button",{className:"btn btn-outline-warning",children:"Rejestracja"})})]})]})]})})}),I=n(7),L=function(e){fetch(p.SERVER_URL+"api/Prisoner",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.data)}).then((function(e){return e.json()})).then((function(t){200===t.statusCode&&(alert("Dodano wi\u0119\u017ania"),e.resetState())})).catch((function(e){console.error("Error:",e)}))},U=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={prisoner:{name:"",forname:"",pesel:"",address:"",pass:!1,behavior:1,isolated:!1,idCell:null},cells:[]},e.handleChange=function(t){"behavior"===t.target.name?e.setState({prisoner:Object(I.a)(Object(I.a)({},e.state.prisoner),{},Object(j.a)({},t.target.name,1*t.target.value))}):e.setState({prisoner:Object(I.a)(Object(I.a)({},e.state.prisoner),{},Object(j.a)({},t.target.name,t.target.value))})},e.setCells=function(t){e.setState({cells:t})},e.componentDidMount=function(){S(e.setCells)},e.resetState=function(){e.setState({prisoner:{name:"",forname:"",pesel:"",address:"",pass:!1,behavior:1,isolated:!1,idCell:null}})},e.handleButton=function(){var t={data:e.state.prisoner,resetState:e.resetState};L(t)},e.handleCells=function(t){e.setState((function(e){var n=Object(I.a)({},e.prisoner);return n.idCell=1*t.target.value,{prisoner:n}}))},e.mapCells=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Cela:"}),Object(m.jsxs)("select",{name:"cellName",onChange:e.handleCells,children:[Object(m.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Wybierz cele"}),e.state.cells.map((function(e){return Object(m.jsxs)("option",{value:e.id,children:[e.cellType.cellName," ",e.occupiedBeds,"/",e.bedsCount]},e.id)}))]})]})},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"loginBox",children:[Object(m.jsx)("h1",{className:"loginH1",children:"Dodawanie nowego wi\u0119\u017ania"}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Imi\u0119",value:this.state.prisoner.name,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"Nazwisko",name:"forname",value:this.state.prisoner.forname,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",name:"pesel",placeholder:"Pesel",value:this.state.prisoner.pesel,onChange:this.handleChange}),Object(m.jsx)("input",{type:"text",placeholder:"Adres",name:"address",value:this.state.prisoner.address,onChange:this.handleChange}),Object(m.jsx)("h3",{children:"Zachowanie:"}),Object(m.jsxs)("select",{name:"behavior",onChange:this.handleChange,children:[Object(m.jsx)("option",{value:"1",children:"1"},"1"),Object(m.jsx)("option",{value:"2",children:"2"},"2"),Object(m.jsx)("option",{value:"3",children:"3"},"3"),Object(m.jsx)("option",{value:"4",children:"4"},"4"),Object(m.jsx)("option",{value:"5",children:"5"},"5")]}),this.mapCells(),Object(m.jsx)("button",{className:"loginButton",onClick:this.handleButton,children:"Dodaj wi\u0119\u017ania"})]})}}]),n}(a.Component),F=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Prisoner/"+e.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setPrisoner(t)})).catch((function(e){console.error("Error:",e)}))},_=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Prisoner/"+e.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.statusCode&&alert("Edytowano Wi\u0119\u017ania")})).catch((function(e){console.error("Error:",e)}))},V=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={prisoner:{name:"",forname:"",pesel:"",address:"",behavior:1}},e.componentDidMount=function(){e.setState({prisoner:e.props.prisoner})},e.handleButton=function(){var t={state:e.state.prisoner,id:e.state.prisoner.id};_(t)},e.handleChange=function(t){"behavior"===t.target.name?e.setState({prisoner:Object(I.a)(Object(I.a)({},e.state.prisoner),{},Object(j.a)({},t.target.name,1*t.target.value))}):e.setState({prisoner:Object(I.a)(Object(I.a)({},e.state.prisoner),{},Object(j.a)({},t.target.name,t.target.value))})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.prisoner,t=e.name,n=e.forname,a=e.pesel,s=e.address,o=e.behavior;return console.log(this.props),Object(m.jsx)("div",{className:"popup",children:Object(m.jsxs)("div",{className:"popup_inner",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"name",htmlFor:"name",children:"Imi\u0119: "}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Imi\u0119",value:t,onChange:this.handleChange})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"forname",htmlFor:"forname",children:"Nazwisko: "}),Object(m.jsx)("input",{type:"text",placeholder:"Nazwisko",name:"forname",value:n,onChange:this.handleChange})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"pesel",htmlFor:"pesel",children:"Pesel: "}),Object(m.jsx)("input",{type:"text",name:"pesel",placeholder:"Pesel",value:a,onChange:this.handleChange})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"address",address:"endDate",children:"Adres: "}),Object(m.jsx)("input",{type:"text",placeholder:"Adres",name:"address",value:s,onChange:this.handleChange})]}),Object(m.jsx)("h3",{children:"Zachowanie:"}),Object(m.jsxs)("select",{name:"behavior",onChange:this.handleChange,children:[Object(m.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:o}),Object(m.jsx)("option",{value:"1",children:"1"},"1"),Object(m.jsx)("option",{value:"2",children:"2"},"2"),Object(m.jsx)("option",{value:"3",children:"3"},"3"),Object(m.jsx)("option",{value:"4",children:"4"},"4"),Object(m.jsx)("option",{value:"5",children:"5"},"5")]}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Edytuj wi\u0119\u017ania"}),Object(m.jsx)("button",{onClick:this.props.closePopup,children:"Zamknij"})]})})}}]),n}(a.Component),M=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={prisoner:[],isFetching:!1},e.componentDidMount=function(){e.initiatePrisoner()},e.initiatePrisoner=function(){var t={setPrisoner:e.setPrisoner,id:e.props.id};F(t)},e.setPrisoner=function(t){e.setState({prisoner:t,isFetching:!0})},e.togglePopup=function(){e.setState({showPopup:!e.state.showPopup}),e.initiatePrisoner()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.state.prisoner,n=t.name,a=t.forname,s=t.pesel,o=t.address,i=t.behavior;return Object(m.jsx)("div",{children:this.state.isFetching?Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{children:[n," ",a]}),Object(m.jsxs)("h3",{children:["Pesel: ",s]}),Object(m.jsxs)("h3",{children:["Adres: ",o]}),Object(m.jsxs)("h3",{children:["Zachowanie: ",i]}),Object(m.jsx)("button",{onClick:function(){e.togglePopup()},children:"Edytuj"}),this.state.showPopup?Object(m.jsx)(V,{prisoner:this.state.prisoner,closePopup:this.togglePopup}):null]}):"brak"})}}]),n}(a.Component),J=function(e){return fetch(p.SERVER_URL+"api/Punishment/"+e.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setPunishment(t)})).catch((function(e){console.error("Error:",e)}))},Z=function(e){return console.log(e.id),fetch(p.SERVER_URL+"api/Reason/"+e.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setReason(t)})).catch((function(e){console.error("Error:",e)}))},G=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Punishment",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),200===e.statusCode&&alert("Dodano kar\u0119")})).catch((function(e){console.error("Error:",e)}))},W=function(e){return fetch(p.SERVER_URL+"api/Reason",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){console.error("Error:",e)}))},K=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={punishment:{idPrisoner:e.props.id,idReason:1,lifery:!1,startDate:"",endDate:new Date},reasons:[],reason:[]},e.componentDidMount=function(){W(e.setReason)},e.setReason=function(t){e.setState({reasons:t})},e.handleReason=function(t){e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},{idReason:1*t.target.value})})},e.mapReason=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Pow\xf3d:"}),Object(m.jsxs)("select",{onChange:e.handleReason,children:[Object(m.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Wybierz pow\xf3d"}),e.state.reasons.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.reasonName},e.id)}))]})]})},e.handleChange=function(t){console.log(t.target.name),"lifery"===t.target.name?e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},Object(j.a)({},t.target.name,!e.state.punishment.lifery))}):e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},Object(j.a)({},t.target.name,t.target.value))})},e.handleButton=function(){G(e.state.punishment),e.props.setPunishment(e.state.punishment)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"startDate",for:"startDate",children:"Data rozpocz\u0119cia kary:"}),Object(m.jsx)("input",{name:"startDate",onChange:this.handleChange,type:"date"})]}),Object(m.jsx)("label",{for:"lifery",children:"Do\u017cywocie:"}),Object(m.jsx)("input",{id:"lifery",name:"lifery",onChange:this.handleChange,type:"checkbox"}),this.state.punishment.lifery?null:Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"endDate",for:"endDate",children:"Data zako\u0144czenia kary:"}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]})}),this.mapReason(),Object(m.jsx)("button",{onClick:function(){return e.handleButton()},className:"add",children:"Dodaj kar\u0119"})]})}}]),n}(a.Component),H=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Punishment/"+e.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.statusCode&&alert("Edytowano Kar\u0119")})).catch((function(e){console.error("Error:",e)}))},q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={punishment:{idPrisoner:e.props.id,idReason:1,lifery:!1,startDate:"",endDate:new Date,reason:[],isFetchingReason:!1}},e.componentDidMount=function(){e.setState({punishment:e.props.punishment}),e.loadReason()},e.loadReason=function(){W(e.setReason)},e.setReason=function(t){e.setState({reason:t,isFetchingReason:!0})},e.handleButton=function(){var t={state:e.state.punishment,id:e.state.punishment.idPrisoner};H(t)},e.handleChange=function(t){"lifery"===t.target.name?e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},{lifery:!e.state.punishment.lifery})}):e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},Object(j.a)({},t.target.name,t.target.value))})},e.handleReason=function(t){e.setState({punishment:Object(I.a)(Object(I.a)({},e.state.punishment),{},{idReason:1*t.target.value})})},e.mapReason=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Pow\xf3d:"}),Object(m.jsxs)("select",{onChange:e.handleReason,children:[Object(m.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:e.props.reason}),e.state.reason.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.reasonName},e.id)}))]})]})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=new Date(this.props.punishment.endDate).toLocaleDateString();return Object(m.jsx)("div",{className:"popup",children:Object(m.jsxs)("div",{className:"popup_inner",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"lifery",htmlFor:"lifery",children:"Do\u017cywocie: "}),Object(m.jsx)("input",{id:"lifery",name:"lifery",onChange:this.handleChange,defaultChecked:this.props.punishment.lifery,type:"checkbox"}),this.state.punishment.lifery?null:Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{id:"endDate",htmlFor:"endDate",children:["Data zako\u0144czenia kary (obecna ",e,"): "]}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]})]}),this.state.isFetchingReason?this.mapReason():null,Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Edytuj kar\u0119"}),Object(m.jsx)("button",{onClick:this.props.closePopup,children:"Zamknij"})]})})}}]),n}(a.Component),Q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isFetchingReason:!1,isFetchingPunishment:!1,punishment:[],reason:[],showPopup:!1},e.componentDidMount=function(){e.initiatePunishment(),setTimeout((function(){e.initiatePunishment()}),1e3)},e.initiatePunishment=function(){var t={setPunishment:e.setPunishment,id:e.props.id};J(t);var n={setReason:e.setReason,id:e.state.punishment.idReason};Z(n)},e.setPunishment=function(t){e.setState({punishment:t,isFetchingPunishment:!0}),console.log(e.state.punishment)},e.setReason=function(t){e.setState({reason:t,isFetchingReason:!0})},e.handlePunishment=function(){var t=new Date(e.state.punishment.startDate).toLocaleDateString(),n=new Date(e.state.punishment.endDate).toLocaleDateString();return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Kara"}),Object(m.jsxs)("h3",{children:["Data rozpocz\u0119cia: ",t]}),Object(m.jsxs)("h3",{children:["Data zako\u0144czenia: ",e.state.punishment.lifery?"Do\u017cywocie":n]}),Object(m.jsxs)("h3",{children:["Pow\xf3d: ",e.state.reason.reasonName]}),Object(m.jsx)("button",{onClick:function(){e.togglePopup()},children:"Edytuj"}),e.state.showPopup?Object(m.jsx)(q,{punishment:e.state.punishment,closePopup:e.togglePopup,reason:e.state.reason.reasonName}):null]})},e.togglePopup=function(t){e.setState({showPopup:!e.state.showPopup}),e.initiatePunishment(),setTimeout((function(){e.initiatePunishment()}),1e3)},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:this.state.isFetchingPunishment?this.handlePunishment():Object(m.jsx)(K,{id:this.props.id,setPunishment:this.setPunishment,setReason:this.setReason})})}}]),n}(a.Component),X=function(e){return fetch(p.SERVER_URL+"api/Pass/"+e.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setPass(t)}))},Y=function(e){return fetch(p.SERVER_URL+"api/Pass/"+e.id,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.deletePass()}))},$=function(e){return console.log(e),fetch(p.SERVER_URL+"api/pass",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),200===e.statusCode&&alert("Dodano przepustke")})).catch((function(e){console.error("Error:",e)}))},ee=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={pass:{idPrisoner:e.props.id,startDate:new Date,endDate:new Date}},e.handleChange=function(t){e.setState({pass:Object(I.a)(Object(I.a)({},e.state.pass),{},Object(j.a)({},t.target.name,t.target.value))})},e.handleButton=function(){$(e.state.pass),e.props.setPass(e.state.pass)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"startDate",for:"startDate",children:"Data rozpocz\u0119cia przepustki:"}),Object(m.jsx)("input",{name:"startDate",onChange:this.handleChange,type:"date"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"endDate",for:"endDate",children:"Data zako\u0144czenia przepustki:"}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]}),Object(m.jsx)("button",{onClick:function(){return e.handleButton()},className:"add",children:"Dodaj przepustk\u0119"})]})}}]),n}(a.Component),te=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Pass/"+e.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.statusCode&&alert("Edytowano Przepustk\u0119")})).catch((function(e){console.error("Error:",e)}))},ne=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={pass:{idPrisoner:e.props.id,startDate:new Date,endDate:new Date}},e.componentDidMount=function(){e.setState({pass:e.props.pass})},e.handleButton=function(){var t={state:e.state.pass,id:e.state.pass.idPrisoner};te(t)},e.handleChange=function(t){e.setState({pass:Object(I.a)(Object(I.a)({},e.state.pass),{},Object(j.a)({},t.target.name,t.target.value))})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=new Date(this.props.pass.endDate).toLocaleDateString();return Object(m.jsx)("div",{className:"popup",children:Object(m.jsxs)("div",{className:"popup_inner",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{id:"endDate",htmlFor:"endDate",children:["Data zako\u0144czenia przepustki (obecna ",e,"): "]}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]})}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Edytuj przepustk\u0119"}),Object(m.jsx)("button",{onClick:this.props.closePopup,children:"Zamknij"})]})})}}]),n}(a.Component),ae=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={pass:[],isFetching:!1,showPopup:!1},e.componentDidMount=function(){e.initiatePass()},e.initiatePass=function(){var t={setPass:e.setPass,id:e.props.id};X(t)},e.setPass=function(t){e.setState({pass:t,isFetching:!0})},e.deletePass=function(){e.setState({pass:[],isFetching:!1})},e.togglePopup=function(){e.setState({showPopup:!e.state.showPopup}),e.initiatePass()},e.handlePass=function(){var t=new Date(e.state.pass.startDate).toLocaleDateString(),n=new Date(e.state.pass.endDate).toLocaleDateString(),a={deletePass:e.deletePass,id:e.props.id};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Przepustka"}),Object(m.jsxs)("h3",{children:["Data rozpocz\u0119cia: ",t]}),Object(m.jsxs)("h3",{children:["Data zako\u0144czenia: ",n]}),Object(m.jsxs)("div",{className:"button-section",children:[Object(m.jsx)("button",{onClick:function(){e.togglePopup()},children:"Edytuj"}),e.state.showPopup?Object(m.jsx)(ne,{pass:e.state.pass,closePopup:e.togglePopup}):null,Object(m.jsx)("button",{className:"delete",onClick:function(){Y(a)},children:"Usu\u0144"})]})]})},e}return Object(r.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.state.isFetching?this.handlePass():Object(m.jsx)(ee,{id:this.props.id,setPass:this.setPass})})}}]),n}(a.Component),se=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Isolation/"+e.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e.setIsolation(t)}))},oe=function(e){return fetch(p.SERVER_URL+"api/isolation/"+e.id,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.deleteIsolation()}))},ie=function(e){return fetch(p.SERVER_URL+"api/isolation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),200===e.statusCode&&alert("Dodano do izolatki")})).catch((function(e){console.error("Error:",e)}))},ce=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isolation:{idPrisoner:e.props.id,startDate:new Date,endDate:new Date}},e.handleChange=function(t){e.setState({isolation:Object(I.a)(Object(I.a)({},e.state.isolation),{},Object(j.a)({},t.target.name,t.target.value))})},e.handleButton=function(){ie(e.state.isolation),e.props.setIsolation(e.state.isolation)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"startDate",for:"startDate",children:"Data rozpocz\u0119cia izolacji:"}),Object(m.jsx)("input",{name:"startDate",onChange:this.handleChange,type:"date"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{id:"endDate",for:"endDate",children:"Data zako\u0144czenia izolacji:"}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]}),Object(m.jsx)("button",{onClick:function(){return e.handleButton()},className:"add",children:"Dodaj do izolacji"})]})}}]),n}(a.Component),re=function(e){return console.log(e),fetch(p.SERVER_URL+"api/Isolation/"+e.id,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.statusCode&&alert("Edytowano Izolacj\u0119")})).catch((function(e){console.error("Error:",e)}))},le=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isolation:{idPrisoner:e.props.id,startDate:new Date,endDate:new Date}},e.componentDidMount=function(){e.setState({isolation:e.props.isolation})},e.handleButton=function(){var t={state:e.state.isolation,id:e.state.isolation.idPrisoner};re(t)},e.handleChange=function(t){e.setState({isolation:Object(I.a)(Object(I.a)({},e.state.isolation),{},Object(j.a)({},t.target.name,t.target.value))})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=new Date(this.props.isolation.endDate).toLocaleDateString();return Object(m.jsx)("div",{className:"popup",children:Object(m.jsxs)("div",{className:"popup_inner",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{id:"endDate",htmlFor:"endDate",children:["Data zako\u0144czenia izolacji (obecna ",e,"): "]}),Object(m.jsx)("input",{name:"endDate",onChange:this.handleChange,type:"date"})]})}),Object(m.jsx)("button",{className:"registerButton",onClick:this.handleButton,children:"Edytuj izolacje"}),Object(m.jsx)("button",{onClick:this.props.closePopup,children:"Zamknij"})]})})}}]),n}(a.Component),he=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isolation:[],isFetching:!1},e.componentDidMount=function(){e.initiateIsolation()},e.initiateIsolation=function(){var t={setIsolation:e.setIsolation,id:e.props.id};se(t)},e.togglePopup=function(){e.setState({showPopup:!e.state.showPopup}),e.initiateIsolation()},e.setIsolation=function(t){e.setState({isolation:t,isFetching:!0})},e.deleteIsolation=function(){e.setState({isolation:[],isFetching:!1})},e.handleIsolation=function(){var t=new Date(e.state.isolation.startDate).toLocaleDateString(),n=new Date(e.state.isolation.endDate).toLocaleDateString(),a={id:e.props.id,deleteIsolation:e.deleteIsolation};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Izolatka:"}),Object(m.jsxs)("h3",{children:["Data rozpocz\u0119cia: ",t]}),Object(m.jsxs)("h3",{children:["Data zako\u0144czenia: ",n]}),Object(m.jsxs)("div",{className:"button-section",children:[Object(m.jsx)("button",{onClick:function(){e.togglePopup()},children:"Edytuj"}),e.state.showPopup?Object(m.jsx)(le,{isolation:e.state.isolation,closePopup:e.togglePopup}):null,Object(m.jsx)("button",{className:"delete",onClick:function(){oe(a)},children:"Skasuj"})]})]})},e}return Object(r.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.state.isFetching?this.handleIsolation():Object(m.jsx)(ce,{id:this.props.id,setIsolation:this.setIsolation})})}}]),n}(a.Component),ue=(n(24),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.id;return Object(m.jsxs)("div",{className:"background",children:[Object(m.jsx)("h1",{children:"Informacje o wi\u0119\u017aniu"}),Object(m.jsxs)("div",{className:"section-main",children:[Object(m.jsx)("div",{className:"component",children:Object(m.jsx)(M,{id:e})}),Object(m.jsx)("div",{className:"component",children:Object(m.jsx)(Q,{id:e})})]}),Object(m.jsxs)("div",{className:"section-main",children:[Object(m.jsx)("div",{className:"component",children:Object(m.jsx)(ae,{id:e})}),Object(m.jsx)("div",{className:"component",children:Object(m.jsx)(he,{id:e})})]})]})}}]),n}(a.Component)),de=function(e){var t=Object(d.g)();return Object(m.jsx)(ue,{id:t.state.id})},je=function(e){return fetch(p.SERVER_URL+"api/Prisoner",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){console.error("Error:",e)}))},pe=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).handleDelate=function(){var t=e.props,n=t.prisoners,a=t.setPrisoners,s=t.id,o=Object(k.a)(n);fetch(p.SERVER_URL+"api/Prisoner/"+s,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.json();var t=o.findIndex((function(e){return e.id===s}));o.splice(t,1),a(o)})).then((function(e){return console.log(e)}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("button",{className:"delete",onClick:function(){e.handleDelate()},children:"Usu\u0144"})}}]),n}(a.Component),be=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.prisoners,n=e.setPrisoners,a=e.filtr,s=e.idReason,o=a?t.filter((function(e){return e.punishments[0]})):t,i=a?o.filter((function(e){return e.punishments[0].idReason===s})):t;return Object(m.jsx)("div",{className:"prisonerBox",children:Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:"headerTable",children:[Object(m.jsx)("td",{children:"Imie:"}),Object(m.jsx)("td",{children:"Nazwisko:"}),Object(m.jsx)("td",{children:"Pesel:"}),Object(m.jsx)("td",{children:"Akcje:"})]},"header"),i.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.name}),Object(m.jsx)("td",{children:e.forname}),Object(m.jsx)("td",{children:e.pesel}),Object(m.jsxs)("td",{children:[Object(m.jsx)(pe,{prisoners:t,setPrisoners:n,id:e.id}),Object(m.jsx)(u.b,{className:"details-Button",to:{pathname:"/prisonerInfo/"+e.id,state:{id:e.id}},children:"Szczeg\xf3\u0142y"})]},e.id)]},e.id)}))]})})})}}]),n}(a.Component),me=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={prisoners:[],filtr:!1,idReason:0,reasons:[]},e.setPrisoners=function(t){e.setState({prisoners:t})},e.setReason=function(t){e.setState({reasons:t})},e.componentDidMount=function(){je(e.setPrisoners),W(e.setReason)},e.setFiltr=function(t){"0"===t.target.value?e.setState({filtr:!1}):e.setState({idReason:1*t.target.value,filtr:!0})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"prisoner-main",children:[Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",value:"0",name:"gender",onClick:this.setFiltr})," Wszystkie"]}),this.state.reasons.map((function(t){return Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",value:t.id,name:"gender",onClick:e.setFiltr})," ",t.reasonName," "]})})),Object(m.jsx)("h1",{children:"Lista wi\u0119\u017ani\xf3w:"}),Object(m.jsx)(be,{prisoners:this.state.prisoners,setPrisoners:this.setPrisoners,filtr:this.state.filtr,idReason:this.state.idReason}),Object(m.jsx)("div",{children:Object(m.jsx)(u.b,{to:"/addPrisoner",children:Object(m.jsx)("button",{className:"add",children:"Dodaj"})})})]})}}]),n}(a.Component),Oe=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={token:null,sesionStatus:!1,roles:""},e.setUser=function(t,n){e.setState({token:t,roles:n,sesionStatus:!0})},e.clearUser=function(){e.setState({token:null,roles:""})},e.componentDidMount=function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");e.setState({token:t,sesionStatus:!0,roles:localStorage.getItem("roles")})}},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"Main",children:Object(m.jsxs)(u.a,{children:[Object(m.jsx)(T,{user:this.state.token,roles:this.state.roles}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/",exact:!0,component:function(){return Object(m.jsx)(f,{user:e.state.token})}}),Object(m.jsx)(d.b,{path:"/register",exact:!0,component:A}),Object(m.jsx)(d.b,{path:"/register/admin",component:B}),Object(m.jsx)(d.b,{path:"/login",component:function(){return Object(m.jsx)(O,{setUser:e.setUser,user:e.state.token})}}),Object(m.jsx)(d.b,{path:"/logout",component:function(){return Object(m.jsx)(g,{clearUser:e.clearUser})}}),this.state.sesionStatus?Object(m.jsxs)("div",{children:[Object(m.jsx)(d.b,{path:"/addCell",component:function(){return Object(m.jsx)(C,{userKey:e.state.token})}}),Object(m.jsx)(d.b,{path:"/prisoners",component:function(){return Object(m.jsx)(me,{userKey:e.state.token})}}),"Admin"===this.state.roles?Object(m.jsxs)("div",{children:[Object(m.jsx)(d.b,{path:"/inviteEmployee",component:function(){return Object(m.jsx)(E,{userKey:e.state.token})}}),Object(m.jsx)(d.b,{path:"/addPrisoner",component:function(){return Object(m.jsx)(U,{userKey:e.state.token})}}),Object(m.jsx)(d.b,{path:"/logs",component:function(){return Object(m.jsx)(R,{userKey:e.state.token})}})]}):null,Object(m.jsx)(d.b,{path:"/cell",component:function(){return Object(m.jsx)(P,{userKey:e.state.token,role:e.state.roles})}}),Object(m.jsx)(d.b,{path:"/prisonerInfo/:id",component:function(){return Object(m.jsx)(de,{userKey:e.state.token})}})]}):null]})]})})}}]),n}(a.Component),fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),o(e),i(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(Oe,{})}),document.getElementById("root")),fe()}},[[46,1,2]]]);
//# sourceMappingURL=main.e9b80040.chunk.js.map